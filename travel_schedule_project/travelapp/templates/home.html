{% extends 'base.html' %}

{% block content %}

<h1>ğŸ”è¦³å…‰åœ°ã‚’æ¤œç´¢</h1>
<form method="get" action="{% url 'travelapp:search_touristspot' %}" class="search-form">
    <div class="search-input">
      <label for="query">æ¤œç´¢ã—ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’1ã¤å…¥åŠ›ã—ã¦ãã ã•ã„</label><br>
      <input type="text" name="query" id="query" value="{{ request.GET.query }}" placeholder="ä¾‹ï¼šä¸–ç•Œéºç”£ã€äº¬éƒ½">
      <small>æ–½è¨­å/éƒ½é“åºœçœŒå/ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰æ¤œç´¢ã§ãã¾ã™ã€‚</small><br>
    </div>
    <div class="search-category">
        <label for="category">ã‚«ãƒ†ã‚´ãƒª</label><br>
        <select name="category" id="category">
            <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
            {% for value, name in category_choices %}
                <option value="{{ value }}" {% if value == request.GET.category %}selected{% endif %}>{{ name }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit" class="search-btn">æ¤œç´¢</button><br><br>
</form><br><br>

<h1>â­ãŠã™ã™ã‚è¦³å…‰åœ°</h1>
{% if tourist_spot %}
  <div class="tourist-spot">
    <div class="tourist-spot-content">
      <a href="{% url 'travelapp:detail_touristspot' pk=tourist_spot.pk %}">
        <img src="{{ tourist_spot.picture.url }}" alt="{{ tourist_spot.spot_name }}">
      </a>
      <div class="tourist-info">
        <strong>{{ tourist_spot.spot_name }}</strong><br>
        <span>{{ tourist_spot.get_prefecture_display }}{{ tourist_spot.address }}</span><br>
        
        {% if latest_review %}
          <div class="review">
            <strong>ğŸ’¬æœ€æ–°ã®ã‚¯ãƒã‚³ãƒŸ</strong><br>
            <span>{{ latest_review.review_title }}</span><br>
            <span>{{ latest_review.review_description }}</span><br>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
{% endif %}

{% block extra_styles %}
<style>
  /* home.htmlå°‚ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  h1 {
      font-size: 24px;
      color: #333;
  }

  /* æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã‚’æ¨ªä¸¦ã³ã« */
  .search-form {
      display: flex;
      align-items: center; /* å‚ç›´æ–¹å‘ã§ä¸­å¤®æƒãˆ */
      justify-content: space-between;
      gap: 20px;
      max-width: 800px;
      margin: 0 auto;
      flex-wrap: nowrap; /* æŠ˜ã‚Šè¿”ã•ãªã„ã‚ˆã†ã«ã™ã‚‹ */
  }

  .search-input, .search-category {
      flex: 1; /* å„ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ãŒå¹³ç­‰ã«å¹…ã‚’å–ã‚‹ */
      display: flex;
      align-items: center; /* ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã¨ãƒ©ãƒ™ãƒ«ã‚’ç¸¦ã«æƒãˆã‚‹ */
  }

  /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
  .search-input input[type="text"], .search-category select {
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 100%;
      box-sizing: border-box; /* paddingã‚„borderãŒwidthã«å«ã¾ã‚Œã‚‹ã‚ˆã†ã« */
  }

  /* ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
  .search-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px; /* ãƒœã‚¿ãƒ³ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
      height: 50px; /* æ˜ç¤ºçš„ã«é«˜ã•ã‚’è¨­å®š */
      border-radius: 5px;
      cursor: pointer;
      max-width: 120px; /* ãƒœã‚¿ãƒ³ã®æœ€å¤§å¹… */
  }

  .search-btn:hover {
      background-color: #45a049;
  }

  small {
      font-size: 12px;
      color: #888;
  }

  /* ãŠã™ã™ã‚è¦³å…‰åœ°ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  .tourist-spot {
      display: flex;
      justify-content: center;
      margin: 20px 0;
  }

  .tourist-spot-content {
      display: flex;
      padding: 20px;
      gap: 20px;
      width: 80%;
  }

  .tourist-spot img {
      border-radius: 8px;
      width: 300px;  /* ç”»åƒã‚’1.5å€ã« */
      height: 225px; /* ç”»åƒã‚’1.5å€ã« */
  }

  .tourist-info {
      font-size: 14px;
      color: #555;
      flex: 1;
  }

  .tourist-info strong {
      font-size: 16px;
      color: #333;
  }

  .review {
      margin-top: 20px;
      font-size: 14px;
      color: #555;
  }

  .review strong {
      color: #333;
  }
</style>
{% endblock %}

{% endblock %}
