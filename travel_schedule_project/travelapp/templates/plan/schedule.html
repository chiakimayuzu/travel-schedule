{% extends 'base.html' %}

{% block content %}
<h1 style="font-size: 24px;">ğŸ“…æ—…è¡Œãƒ—ãƒ©ãƒ³ä½œæˆ</h1>

<form method="post" action="{% url 'travelapp:schedule' %}" style="max-width: 500px; margin-left: 20px;">
  {% csrf_token %}

  <!-- æ—…è¡Œæ—¥ç¨‹ -->
  <div style="display: block !important; margin-bottom: 20px;">
    <label for="schedule-range" style="display: block !important; margin-bottom: 8px;">æ—…è¡Œæ—¥ç¨‹</label>
    <div style="display: flex; align-items: center;">
      <input type="text" id="schedule-range" name="schedule_range"
             placeholder="æ—¥ä»˜ã‚’é¸æŠã—ã¦ãã ã•ã„" readonly
             style="flex: 1; padding: 10px; margin-right: 10px;">
      <span id="calendar-icon" style="cursor: pointer; font-size: 20px;">ğŸ“†</span>
    </div>
  </div>
  <input type="hidden" name="start_date" id="start_date">
  <input type="hidden" name="end_date" id="end_date">

  <!-- ãƒ—ãƒ©ãƒ³å -->
  <div style="display: block !important; margin-bottom: 20px;">
    <label for="touristplan_name" style="display: block !important; margin-bottom: 8px;">ãƒ—ãƒ©ãƒ³å</label>
    <input type="text" id="touristplan_name" name="touristplan_name" required
       placeholder="ä¾‹: åŒ—æµ·é“3æ—¥é–“ã®æ—…"
       style="display: block !important; width: 100%; padding: 10px;">
  </div>

  <!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆãƒœã‚¿ãƒ³ -->
  <br><button type="submit" class="schedule-btn">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ</button>

  </div>
</form>

<!-- flatpickrã®CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
  const calendarInput = document.getElementById("schedule-range");
  const calendarIcon = document.getElementById("calendar-icon");

  const calendar = flatpickr(calendarInput, {
    mode: "range",
    dateFormat: "Y-m-d",
    locale: "ja",
    onClose: function(selectedDates) {
      if (selectedDates.length === 2) {
        const formatDate = (date) => {
          const year = date.getFullYear();
          const month = ('0' + (date.getMonth() + 1)).slice(-2);
          const day = ('0' + date.getDate()).slice(-2);
          return `${year}-${month}-${day}`;
        };

        const start = formatDate(selectedDates[0]);
        const end = formatDate(selectedDates[1]);

        document.getElementById("start_date").value = start;
        document.getElementById("end_date").value = end;
        document.getElementById("schedule-range").value = `${start} to ${end}`;
      }
    }
  });

  calendarIcon.addEventListener("click", function () {
    calendar.open();
  });
</script>

<style>
  /* ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
  .schedule-btn {
      background-color: rgb(69, 110, 160);
      color: white;
      border: none;
      padding: 12px 30px; /* æ¨ªå¹…ã‚’åºƒã’ã‚‹ãŸã‚ã«ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ */
      height: 50px; /* é«˜ã•ã‚’è¨­å®š */
      border-radius: 5px;
      cursor: pointer;
      width: 100%; /* ãƒœã‚¿ãƒ³ãŒæ¨ªå¹…ã„ã£ã±ã„ã«åºƒãŒã‚‹ */
      text-align: center; /* ãƒœã‚¿ãƒ³å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®å¯„ã› */
  }

  .schedule-btn:hover {
    background-color: rgb(89, 130, 180);
    cursor: pointer;
  }
</style>
{% endblock %}

