{% extends "base.html" %}

{% block content %}
<h1 style="font-size: 24px;">ğŸ“æ–°è¦ã‚¯ãƒã‚³ãƒŸã®ä½œæˆ</h1>

  <!-- ğŸ”¹ è¦³å…‰åœ°åã¨ç”»åƒã‚’è¡¨ç¤º -->
  <div class="spot-info">
    <br><h1 style="font-size: 20px;">{{ tourist_spot.spot_name }}</h2>
    {% if tourist_spot.picture %}
      <img src="{{ tourist_spot.picture.url }}" alt="{{ tourist_spot.spot_name }}" class="spot-image">
    {% else %}
      <img src="/static/images/no-image.png" alt="No Image" class="spot-image">
    {% endif %}
  </div>

  <div class="back-link">
    <a href="{% url 'travelapp:detail_touristspot' pk=tourist_spot.pk %}" class="back-link-btn">â†è¦³å…‰æ–½è¨­è©³ç´°ç”»é¢ã¸æˆ»ã‚‹</a>
  </div>

  <br>{% if form.review_score.errors %}
  <div class="error">
    {% for error in form.review_score.errors %}
      <p>{{ error }}</p>
    {% endfor %}
  </div>
{% endif %}



{% if form.stay_time_hours.errors or form.stay_time_minutes.errors %}
<div class="error">
  {% for error in form.stay_time_hours.errors %}
    <p>{{ error }}</p>
  {% endfor %}
  {% for error in form.stay_time_minutes.errors %}
    <p>{{ error }}</p>
  {% endfor %}
</div>
{% endif %}

  <form method="post">
    {% csrf_token %}

<!-- è©•ä¾¡ã‚¹ã‚³ã‚¢ -->
<br><div class="form-group">
  <label for="{{ form.review_score.id_for_label }}" class="form-label">è©•ä¾¡ã‚¹ã‚³ã‚¢<span style="color: red;">*</span></label>
  <div class="rating-stars" id="rating-stars">
    {% for i in "12345" %}
      <span class="star" data-value="{{ i }}">&#9733;</span>
    {% endfor %}
  </div>
  <input type="hidden" name="review_score" value="{{ form.review_score.value|default:0 }}">
  {% if form.review_score.errors %}
    <div class="error">
      {% for error in form.review_score.errors %}
        <p>{{ error }}</p>
      {% endfor %}
    </div>
  {% endif %}
</div>

    <!-- ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒˆãƒ« -->
    <div class="form-group">
      <label for="{{ form.review_title.id_for_label }}" class="form-label">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒˆãƒ«<span style="color: red;">*</span></label>
      {{ form.review_title }}
      {% if form.review_title.errors %}
        <div class="error">
          {% for error in form.review_title.errors %}
            <p>{{ error }}</p>
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <!-- ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ -->
    <div class="form-group">
      <label for="{{ form.review_description.id_for_label }}" class="form-label">ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹<span style="color: red;">*</span></label>
      {{ form.review_description }}
      {% if form.review_description.errors %}
        <div class="error">
          {% for error in form.review_description.errors %}
            <p>{{ error }}</p>
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <!-- ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾¡æ ¼ -->
    <div class="form-group">
      <label for="{{ form.review_price.id_for_label }}" class="form-label">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾¡æ ¼<span style="color: red;">*</span></label>
      {{ form.review_price }}
      {% if form.review_price.errors %}
        <div class="error">
          {% for error in form.review_price.errors %}
            <p>{{ error }}</p>
          {% endfor %}
        </div>
      {% endif %}
    </div>

<!-- æ»åœ¨æ™‚é–“ -->
<div class="form-group time-group">
  <label class="form-label">æ»åœ¨æ™‚é–“<span style="color: red;">*</span></label>
  <div class="stay-time">
    {{ form.stay_time_hours }} æ™‚ {{ form.stay_time_minutes }} åˆ†
  </div>
  
  {% if form.stay_time_hours.errors %}
    <div class="error">
      {% for error in form.stay_time_hours.errors %}
        <p>{{ error }}</p>
      {% endfor %}
    </div>
  {% endif %}
  
  {% if form.stay_time_minutes.errors %}
    <div class="error">
      {% for error in form.stay_time_minutes.errors %}
        <p>{{ error }}</p>
      {% endfor %}
    </div>
  {% endif %}
</div>

    <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
    <button type="submit" class="submit-button">ä½œæˆ</button>
  </form>

<!-- â­ JS for star rating -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const stars = document.querySelectorAll('.star');
    const ratingInput = document.querySelector('input[name="review_score"]');

    function setRating(rating) {
      stars.forEach((star, index) => {
        if (index < rating) {
          star.classList.add('selected');
        } else {
          star.classList.remove('selected');
        }
      });
      ratingInput.value = rating;
    }

    stars.forEach((star, index) => {
      star.addEventListener('click', () => setRating(index + 1));
      star.addEventListener('mouseover', () => setRating(index + 1));
      star.addEventListener('mouseleave', () => setRating(ratingInput.value || 1));
    });

    setRating(ratingInput.value || 1);
  });
</script>

{% block extra_styles %}
<style>
  
  /* ãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›è¦ç´ ã‚’æŸ”ã‚‰ã‹ãã™ã‚‹ */
input, select, textarea {
  border-radius: 8px; /* è§’ã‚’ä¸¸ãã™ã‚‹ */
  padding: 10px;
  font-size: 16px;
  border: 1px solid #ddd;
  transition: border-color 0.3s ease; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®è‰²å¤‰æ›´ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã« */
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ  */
input:focus, select:focus, textarea:focus {
  border-color: #4ca7af; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚«ãƒ©ãƒ¼ã‚’å¤‰æ›´ */
  outline: none; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’å‰Šé™¤ */
}

/* ãƒ•ã‚©ãƒ¼ãƒ ãƒ©ãƒ™ãƒ«ã¨å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç¸¦ä¸¦ã³ */
.form-group {
  margin-bottom: 20px; /* å„ãƒ•ã‚©ãƒ¼ãƒ ã®é–“éš”ã‚’èª¿æ•´ */
}

.form-label {
  display: block; /* ãƒ©ãƒ™ãƒ«ã‚’ãƒ–ãƒ­ãƒƒã‚¯è¦ç´ ã¨ã—ã¦è¡¨ç¤º */
  font-weight: bold; /* ãƒ©ãƒ™ãƒ«ã®å¤ªæ–‡å­—åŒ– */
  margin-bottom: 5px; /* ãƒ©ãƒ™ãƒ«ã¨å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®é–“éš”ã‚’èª¿æ•´ */
}

input, select, textarea {
  width: 100%; /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚’æ¨ªå¹…100%ã« */
  padding: 10px;
  font-size: 16px;
  border: 1px solid #ddd;
  border-radius: 8px; /* è§’ã‚’ä¸¸ãã™ã‚‹ */
  margin-bottom: 10px; /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã¨æ¬¡ã®è¦ç´ ã¨ã®é–“éš” */
}

  .spot-image {
    max-width: 100%;
    height: auto;
    width: 300px; /* ç”»åƒã®å¹…ã‚’èª¿æ•´ */
    object-fit: cover;
    border-radius: 10px; /* ç”»åƒã®è§’ã‚’ä¸¸ãã™ã‚‹ */
  }

  .stay-time {
    display: flex;
    gap: 15px;
    font-size: 16px;
  }
  
  .stay-time select {
    padding: 8px;
    font-size: 14px;  /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å°ã•ã */
    border-radius: 8px;
    border: 1px solid #ddd;
    width: 120px;  /* å¹…ã‚’å°ã•ã */
  }
  .submit-button {
    background-color: rgb(76, 167, 175);
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s ease, transform 0.3s ease;
  }

  .rating-stars {
    display: inline-block;
    gap: 4px;
  }

  .star {
    font-size: 30px;
    color: #ccc;
    cursor: pointer;
    transition: color 0.2s, transform 0.2s ease-in-out;
  }

  .star.selected,
  .star:hover {
    color: gold;
  }

  .star:hover {
    transform: scale(1.2);
  }

</style>
{% endblock %}
{% endblock %}
